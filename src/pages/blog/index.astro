---
import { PAGE_SIZE } from 'site-config';
import BlogList, { type Props as BlogListProps } from 'layouts/BlogList.astro';
import { sortPostsByRecency } from 'utils/posts-helpers';
import type { PostFrontMatter } from 'utils/types';

const allPosts = await Astro.glob<PostFrontMatter>('../../posts/**/*.md');
const sortedPosts = sortPostsByRecency(allPosts).slice(0, PAGE_SIZE);

const page: BlogListProps['page'] = {
	data: sortedPosts,
	start: 0,
	end: 0,
	currentPage: 1,
	total: allPosts.length,
	size: allPosts.length,
	lastPage: 0,
	url: {
		current: '',
		prev: '',
		next: '',
	},
};
---

<BlogList page={page} />
